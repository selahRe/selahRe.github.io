<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Sql | Xinyu's Blog</title>
<meta name=keywords content="sql"><meta name=description content="sql"><meta name=author content="Me"><link rel=canonical href=https://selahre.github.io/sql/><link crossorigin=anonymous href=/assets/css/stylesheet.5b61c14540ad05de9695a39ef7a917d70d6166d59c283e88a1985341355bd8ea.css integrity="sha256-W2HBRUCtBd6WlaOe96kX1w1hZtWcKD6IoZhTQTVb2Oo=" rel="preload stylesheet" as=style><link rel=icon href=https://selahre.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://selahre.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://selahre.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://selahre.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://selahre.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://selahre.github.io/sql/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel=stylesheet><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><meta property="og:url" content="https://selahre.github.io/sql/"><meta property="og:site_name" content="Xinyu's Blog"><meta property="og:title" content="Sql"><meta property="og:description" content="sql"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-03-20T09:13:23+08:00"><meta property="article:modified_time" content="2025-03-20T09:13:23+08:00"><meta property="article:tag" content="Sql"><meta property="og:image" content="https://selahre.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://selahre.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Sql"><meta name=twitter:description content="sql"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://selahre.github.io/post/"},{"@type":"ListItem","position":2,"name":"Sql","item":"https://selahre.github.io/sql/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Sql","name":"Sql","description":"sql","keywords":["sql"],"articleBody":"在终端打开mysql 登录/导入/导出 source ~/.bash_profile //登录使用 mysql -u root -p mysql\u003e show databases; //导出database数据 mysqldump -u root -p game\u003egame.sql //create database game;后再导入 mysql -u root -p game\u003cgame.sql create a database and use\n创建table 在Navicat中连接并进入database game，New Query 可输入命令行\ncreate database game; use game; CREATE TABLE player( id INT, -- int/float/double name VARCHAR(10), --char/varchar/text/blob 定长/变长/文本/二进制数据 LEVEL INT, --还有日期和时间类型 date/time/datetime/timestamp 时间戳 exp INT, gold DECIMAL(10,2) --长度10并保留2位数小数的十进制数值 ) desc player --查看table的结构 修改table /* COLUMN 可省略：修改列默认值等 不可：修改列名/类型/删除列/加新列 */ ALTER TABLE player modify COLUMN name VARCHAR(20); ALTER TABLE player modify COLUMN name to nick_name; ALTER TABLE player add COLUMN last_login TIMESTAMP; ALTER TABLE player drop COLUMN last_login; --drop table player; --drop database game; 列的约束：DEFAULT/unique/null/not null/ 主键约束：数据唯一性，不为空 外键约束：数据一致性，外键必须是另一个table的主键\n增删改查 --增 ALTER TABLE player modify LEVEL INT DEFAULT 1;--unique/null/not null INSERT INTO player (id, name, level, exp, gold) VALUES(1,'Lily',1,1,1); INSERT INTO player (id, name) VALUES(2,'Shiv'); --其他用默认值填充 INSERT INTO player (id, name) VALUES(3,'Sam'), (4,'Logan'); --改 UPDATE player set LEVEL = 2 WHERE name = 'Lily'; UPDATE player set exp = 0, gold = 0;--修改所有的 --删 DELETE FROM player WHERE id = 1; --查 nor\u003eand\u003eor或者用（） SELECT * from player where LEVEL\u003e=1 and LEVEL\u003c=10; SELECT * from player where level between 1 and 10; SELECT * from player where LEVEL in (1,3); --1/3 SELECT * from player where name like '%王%'; SELECT * from player where name regexp '王';--和上面相同 SELECT * from player where name regexp'^王.$';--查找王x --查找空 SELECT * from player where email is null; --非空 is not null SELECT * from player where email = '';--空字符串 where/ between and/ in 模糊查找 like %任意n个字符 _任意1个字符 regexp 正则表达式\n表达式 含义 . 任意一个字符 ^ 开头 $ 结尾 [abc] 其中任意一个字符 [a-f] 范围内任意一个字符 A｜B A或者B 排序 order SELECT * from player order by level;--升序 ASC SELECT * from player order by level DESC, exp;--level降序基础上用exp升序排列 计算 聚合函数\n表达式 含义 AVG( ) 平均值 count( ) 项目数 max( ) max min( ) min sum( ) sum SELECT count(*) from player; SELECT avg(level) from player; 分组 SELECT sex, count(*) from player group by sex; --count (sex) 不计算null的数量 SELECT level, count(level) from player group by level HAVING COUNT(level)\u003e4; -- 同一个level人数\u003e4的 SELECT SUBSTR(name, 1, 1), COUNT(SUBSTR(name, 1, 1)) from player GROUP BY SUBSTR(name, 1, 1) HAVING COUNT(SUBSTR(name, 1, 1))\u003e4 ORDER BY COUNT(SUBSTR(name, 1, 1)) DESC;--统计姓氏降序排 限制输出(分页效果）\nlimit 3; --输出前3个 limit 3, 3; --输出前4-6个 去重distinct SELECT distinct sex from player; 两个select一起查找 Union --合并并集，只查出一次 SELECT * from player where LEVEL in (1,3) Union SELECT * from player where exp between 1 and 3; -- Union all 不合并 子查询 用前面的查询作为先决条件\ninsert into new_player select * from player where level \u003e5; select exists() 表关联 关联的表里面有相同字段，用表的主键和外键关联\n内连接 SELECT * from player INNER JOIN equip --用inner join指定关联的表 on player.id = equip.player_id; --on +关联字段 left join 显示左表完整的信息，右表没有相关的就用null填充 right join\nSELECT * from player p, equip e where p.id = e.player_id; 索引 CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX index_name; 唯一/全文/空间 索引名称 on 哪张表（哪些字段）创建索引\nCREATE INDEX id_index ON player(id); show INDEX FROM player; drop INDEX id_index on player; --删除 alter table player add index id_index (id); 视图 --新建 CREATE VIEW top as SELECT * from player ORDER BY LEVEL desc LIMIT 10; --修改 alter VIEW top as SELECT * from player ORDER BY LEVEL LIMIT 10; --查看 SELECT * from top --删除 drop view top; ","wordCount":"1192","inLanguage":"zh","image":"https://selahre.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-03-20T09:13:23+08:00","dateModified":"2025-03-20T09:13:23+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://selahre.github.io/sql/"},"publisher":{"@type":"Organization","name":"Xinyu's Blog","logo":{"@type":"ImageObject","url":"https://selahre.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://selahre.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://selahre.github.io/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://selahre.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://selahre.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://selahre.github.io/about/ title=about><span>about</span></a></li><li><a href=https://selahre.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://selahre.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://selahre.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://selahre.github.io/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Sql</h1><div class=post-meta><span title='2025-03-20 09:13:23 +0800 +0800'>三月 20, 2025</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1192 字&nbsp;·&nbsp;Me</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#在终端打开mysql-登录导入导出>在终端打开mysql 登录/导入/导出</a><ul><li><a href=#创建table>创建table</a></li><li><a href=#修改table>修改table</a></li></ul></li><li><a href=#增删改查>增删改查</a><ul><li><a href=#where-between-and-in>where/ between and/ in</a></li><li><a href=#模糊查找>模糊查找</a></li><li><a href=#排序-order>排序 order</a></li></ul></li><li><a href=#计算>计算</a><ul><li><a href=#分组>分组</a></li><li><a href=#去重distinct>去重distinct</a></li><li><a href=#两个select一起查找-union>两个select一起查找 Union</a></li></ul></li><li><a href=#子查询>子查询</a></li><li><a href=#表关联>表关联</a><ul><li><a href=#内连接>内连接</a></li></ul></li><li><a href=#索引>索引</a></li><li><a href=#视图>视图</a></li></ul></nav></div></details></div><div class=post-content><h2 id=在终端打开mysql-登录导入导出>在终端打开mysql 登录/导入/导出<a hidden class=anchor aria-hidden=true href=#在终端打开mysql-登录导入导出>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>source</span><span class=w> </span><span class=o>~/</span><span class=p>.</span><span class=na>bash_profile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//登录使用</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>mysql</span><span class=w> </span><span class=o>-</span><span class=n>u</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>-</span><span class=n>p</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>mysql</span><span class=o>&gt;</span><span class=w> </span><span class=n>show</span><span class=w> </span><span class=n>databases</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//导出database数据</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>mysqldump</span><span class=w> </span><span class=o>-</span><span class=n>u</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>-</span><span class=n>p</span><span class=w> </span><span class=n>game</span><span class=o>&gt;</span><span class=n>game</span><span class=p>.</span><span class=na>sql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>//create database game;后再导入</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>mysql</span><span class=w> </span><span class=o>-</span><span class=n>u</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>-</span><span class=n>p</span><span class=w> </span><span class=n>game</span><span class=o>&lt;</span><span class=n>game</span><span class=p>.</span><span class=na>sql</span><span class=w>
</span></span></span></code></pre></div><p>create a database and use</p><h3 id=创建table>创建table<a hidden class=anchor aria-hidden=true href=#创建table>#</a></h3><p>在Navicat中连接并进入database game，New Query 可输入命令行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=n>game</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>use</span><span class=w> </span><span class=n>game</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>player</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>id</span><span class=w> </span><span class=nb>INT</span><span class=p>,</span><span class=w> </span><span class=c1>-- int/float/double
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span><span class=w> </span><span class=c1>--char/varchar/text/blob 定长/变长/文本/二进制数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>	</span><span class=k>LEVEL</span><span class=w> </span><span class=nb>INT</span><span class=p>,</span><span class=w> </span><span class=c1>--还有日期和时间类型 date/time/datetime/timestamp 时间戳
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>	</span><span class=n>exp</span><span class=w> </span><span class=nb>INT</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>gold</span><span class=w> </span><span class=nb>DECIMAL</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=c1>--长度10并保留2位数小数的十进制数值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>desc</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=c1>--查看table的结构
</span></span></span></code></pre></div><h3 id=修改table>修改table<a hidden class=anchor aria-hidden=true href=#修改table>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>COLUMN 可省略：修改列默认值等
</span></span></span><span class=line><span class=cl><span class=cm>不可：修改列名/类型/删除列/加新列
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>modify</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>20</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>modify</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=n>nick_name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>add</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>last_login</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>drop</span><span class=w> </span><span class=k>COLUMN</span><span class=w> </span><span class=n>last_login</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--drop table player;
</span></span></span><span class=line><span class=cl><span class=c1>--drop database game;
</span></span></span></code></pre></div><p>列的约束：DEFAULT/unique/null/not null/
主键约束：数据唯一性，不为空
外键约束：数据一致性，外键必须是另一个table的主键</p><h2 id=增删改查>增删改查<a hidden class=anchor aria-hidden=true href=#增删改查>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--增
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>modify</span><span class=w> </span><span class=k>LEVEL</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=c1>--unique/null/not null
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=k>level</span><span class=p>,</span><span class=w> </span><span class=n>exp</span><span class=p>,</span><span class=w> </span><span class=n>gold</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;Lily&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=s1>&#39;Shiv&#39;</span><span class=p>);</span><span class=w> </span><span class=c1>--其他用默认值填充
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=s1>&#39;Sam&#39;</span><span class=p>),</span><span class=w> </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;Logan&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--改
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>UPDATE</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=k>LEVEL</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Lily&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UPDATE</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>gold</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=c1>--修改所有的
</span></span></span><span class=line><span class=cl><span class=c1>--删
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--查 nor&gt;and&gt;or或者用（）
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>LEVEL</span><span class=o>&gt;=</span><span class=mi>1</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=k>LEVEL</span><span class=o>&lt;=</span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>level</span><span class=w> </span><span class=k>between</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>LEVEL</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span><span class=w> </span><span class=c1>--1/3
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>like</span><span class=w> </span><span class=s1>&#39;%王%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>regexp</span><span class=w> </span><span class=s1>&#39;王&#39;</span><span class=p>;</span><span class=c1>--和上面相同
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=n>regexp</span><span class=s1>&#39;^王.$&#39;</span><span class=p>;</span><span class=c1>--查找王x
</span></span></span><span class=line><span class=cl><span class=c1>--查找空
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=p>;</span><span class=w> </span><span class=c1>--非空 is not null
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>;</span><span class=c1>--空字符串
</span></span></span></code></pre></div><h3 id=where-between-and-in>where/ between and/ in<a hidden class=anchor aria-hidden=true href=#where-between-and-in>#</a></h3><h3 id=模糊查找>模糊查找<a hidden class=anchor aria-hidden=true href=#模糊查找>#</a></h3><p>like %任意n个字符 _任意1个字符
regexp 正则表达式</p><table><thead><tr><th>表达式</th><th>含义</th></tr></thead><tbody><tr><td>.</td><td>任意一个字符</td></tr><tr><td>^</td><td>开头</td></tr><tr><td>$</td><td>结尾</td></tr><tr><td>[abc]</td><td>其中任意一个字符</td></tr><tr><td>[a-f]</td><td>范围内任意一个字符</td></tr><tr><td>A｜B A或者B</td><td></td></tr></tbody></table><h3 id=排序-order>排序 order<a hidden class=anchor aria-hidden=true href=#排序-order>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>level</span><span class=p>;</span><span class=c1>--升序 ASC
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>level</span><span class=w> </span><span class=k>DESC</span><span class=p>,</span><span class=w> </span><span class=n>exp</span><span class=p>;</span><span class=c1>--level降序基础上用exp升序排列
</span></span></span></code></pre></div><h2 id=计算>计算<a hidden class=anchor aria-hidden=true href=#计算>#</a></h2><p>聚合函数</p><table><thead><tr><th>表达式</th><th>含义</th></tr></thead><tbody><tr><td>AVG( )</td><td>平均值</td></tr><tr><td>count( )</td><td>项目数</td></tr><tr><td>max( )</td><td>max</td></tr><tr><td>min( )</td><td>min</td></tr><tr><td>sum( )</td><td>sum</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=k>level</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 id=分组>分组<a hidden class=anchor aria-hidden=true href=#分组>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>sex</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>sex</span><span class=p>;</span><span class=w> </span><span class=c1>--count (sex) 不计算null的数量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>level</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=k>level</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>level</span><span class=w> </span><span class=k>HAVING</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=k>level</span><span class=p>)</span><span class=o>&gt;</span><span class=mi>4</span><span class=p>;</span><span class=w> </span><span class=c1>-- 同一个level人数&gt;4的
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>SUBSTR</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>),</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>SUBSTR</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>))</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>SUBSTR</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>SUBSTR</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>))</span><span class=o>&gt;</span><span class=mi>4</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=n>SUBSTR</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>))</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=c1>--统计姓氏降序排
</span></span></span></code></pre></div><p>限制输出(<strong>分页</strong>效果）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>limit</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w> </span><span class=c1>--输出前3个
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>limit</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w> </span><span class=c1>--输出前4-6个
</span></span></span></code></pre></div><h3 id=去重distinct>去重distinct<a hidden class=anchor aria-hidden=true href=#去重distinct>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>distinct</span><span class=w> </span><span class=n>sex</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=p>;</span><span class=w> 
</span></span></span></code></pre></div><h3 id=两个select一起查找-union>两个select一起查找 Union<a hidden class=anchor aria-hidden=true href=#两个select一起查找-union>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--合并并集，只查出一次
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>LEVEL</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>Union</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>player</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>exp</span><span class=w> </span><span class=k>between</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Union all 不合并
</span></span></span></code></pre></div><h2 id=子查询>子查询<a hidden class=anchor aria-hidden=true href=#子查询>#</a></h2><p>用前面的查询作为先决条件</p><pre tabindex=0><code>insert into new_player select * from player where level &gt;5;
select exists()
</code></pre><h2 id=表关联>表关联<a hidden class=anchor aria-hidden=true href=#表关联>#</a></h2><p>关联的表里面有相同字段，用表的主键和外键关联</p><h3 id=内连接>内连接<a hidden class=anchor aria-hidden=true href=#内连接>#</a></h3><pre tabindex=0><code>SELECT * from player
INNER JOIN equip  --用inner join指定关联的表
on player.id = equip.player_id; --on +关联字段
</code></pre><p>left join 显示左表完整的信息，右表没有相关的就用null填充
right join</p><pre tabindex=0><code>SELECT * from player p, equip e
where  p.id = e.player_id;
</code></pre><h2 id=索引>索引<a hidden class=anchor aria-hidden=true href=#索引>#</a></h2><p>CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX index_name;
唯一/全文/空间 索引名称
on 哪张表（哪些字段）创建索引</p><pre tabindex=0><code>CREATE INDEX id_index ON player(id);
show INDEX FROM player;
drop INDEX id_index on player; --删除
alter table player add index id_index (id);
</code></pre><h2 id=视图>视图<a hidden class=anchor aria-hidden=true href=#视图>#</a></h2><pre tabindex=0><code>--新建
CREATE VIEW top
as 
SELECT * from player ORDER BY LEVEL desc LIMIT 10;
--修改
alter VIEW top
as 
SELECT * from player ORDER BY LEVEL LIMIT 10;
--查看
SELECT * from top 
--删除
drop view top;
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://selahre.github.io/tags/sql/>Sql</a></li></ul><nav class=paginav><a class=prev href=https://selahre.github.io/post/tcp/><span class=title>« 上一页</span><br><span>Tcp</span>
</a><a class=next href=https://selahre.github.io/post/project/><span class=title>下一页 »</span><br><span>Project</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://selahre.github.io/>Xinyu's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>